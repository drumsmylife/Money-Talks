(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{283:function(e,t,a){e.exports=a.p+"static/media/NewLogo.4226549c.png"},292:function(e,t,a){e.exports=a(602)},297:function(e,t,a){},324:function(e,t,a){},601:function(e,t,a){},602:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),l=(a(297),a(25)),s=a(24),i=a(27),u=a(26),m=a(28),d=a(44),p=a(63),h=a(111),f=a.n(h),E=a(45),b=a.n(E),g=function(e){e?b.a.defaults.headers.common.Authorization=e:delete b.a.defaults.headers.common.Authorization},v=function(e){return{type:"SET_CURRENT_USER",payload:e}},y=function(){return function(e){localStorage.removeItem("jwtToken"),g(!1),e(v({}))}},N=a(30),w=a(34),O=a(282),k=a(53),T=a(323),j={isAuthenticated:!1,user:{},loading:!1},S={},C=a(290),A={accounts:[],transactions:[],accountsLoading:!1,transactionsLoading:!1},x=Object(w.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(k.a)({},e,{isAuthenticated:!T(t.payload),user:t.payload});case"USER_LOADING":return Object(k.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},plaid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACCOUNTS_LOADING":return Object(k.a)({},e,{accountsLoading:!0});case"ADD_ACCOUNT":return Object(k.a)({},e,{accounts:[t.payload].concat(Object(C.a)(e.accounts))});case"DELETE_ACCOUNT":return Object(k.a)({},e,{accounts:e.accounts.filter(function(e){return e._id!==t.payload})});case"GET_ACCOUNTS":return Object(k.a)({},e,{accounts:t.payload,accountsLoading:!1});case"TRANSACTIONS_LOADING":return Object(k.a)({},e,{transactionsLoading:!0});case"GET_TRANSACTIONS":return Object(k.a)({},e,{transactions:t.payload,transactionsLoading:!1});default:return e}}}),L=[O.a],_=Object(w.e)(x,{},Object(w.d)(w.a.apply(void 0,L),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),R=a(283),D=a.n(R),U=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar black"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 logo"},r.a.createElement("img",{src:D.a,alt:"Money Talk$",style:{height:150,width:175,display:"inline"}}))))}}]),t}(n.Component),I=(a(324),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("h4",{className:"tagline"},"The Budget App For Millenials ",r.a.createElement("br",null),"Sign In And Save That Money Bruh!"),r.a.createElement("br",null),r.a.createElement("div",{className:"col s6 register"},r.a.createElement(d.b,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable black accent-3"},"Register")),r.a.createElement("div",{className:"col s6"},r.a.createElement(d.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large btn-flat waves-effect black white-text"},"Log In")))))}}]),t}(n.Component)),G=a(73),M=a(7),P=a.n(M),F=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(G.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container top-buffer"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(d.b,{to:"/",className:"btn-flat waves-effect black"},r.a.createElement("i",{className:"material-icons left"},"\u2190")," Back to home"),r.a.createElement("div",{className:"col s12 register-button",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Register")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",r.a.createElement(d.b,{to:"/login"},"Log in"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:P()("",{invalid:e.name})}),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("span",{className:"red-text"},e.name)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:P()("",{invalid:e.email})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:P()("",{invalid:e.password})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:P()("",{invalid:e.password2})}),r.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),r.a.createElement("span",{className:"red-text"},e.password2)),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sign up"))))))}}]),t}(n.Component),B=Object(N.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){b.a.post("/api/users/register",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(p.f)(F)),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState(Object(G.a)({},e.target.id,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};a.props.loginUser(t)},a.state={isLoading:!0,signUpError:"",signInError:"",errors:{}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container top-buffer"},r.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(d.b,{to:"/",className:"btn-flat waves-effect black"},r.a.createElement("i",{className:"material-icons left"},"\u2190")," Back to home"),r.a.createElement("div",{className:"col s12 login-button",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Login")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",r.a.createElement(d.b,{to:"/register"},"Register"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:P()("",{invalid:e.email||e.emailnotfound})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:P()("",{invalid:e.password||e.passwordincorrect})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),t}(n.Component),z=Object(N.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){b.a.post("/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),g(a);var n=f()(a);t(v(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(W),V=a(291),X=Object(N.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(V.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))}),q=a(113),J=function(e){return function(t){var a=e.accounts;b.a.post("/api/plaid/accounts/add",e).then(function(e){return t({type:"ADD_ACCOUNT",payload:e.data})}).then(function(e){return a?t($(a.concat(e.payload))):null}).catch(function(e){return console.log(e)})}},Y=function(){return{type:"ACCOUNTS_LOADING"}},$=function(e){return function(t){t(H()),b.a.post("/api/plaid/accounts/transactions",e).then(function(e){return t({type:"GET_TRANSACTIONS",payload:e.data})}).catch(function(e){return t({type:"GET_TRANSACTIONS",payload:null})})}},H=function(){return{type:"TRANSACTIONS_LOADING"}},K=a(285),Q=a.n(K),Z=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"checkTotal",value:function(e){if(e<=500){return console.log("less than 500","Awesome"),"Awesome"}if(500<=e&&e<=1500){return"Not Bad"}if(1500<=e&&e<=5e3){return"Slow Down Idiot"}return"STOP!"}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card",style:{width:"18rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",null,"Category: ",this.props.category),r.a.createElement("h5",null,"Total Spent:  $ ",this.props.total),r.a.createElement("h5",null,this.checkTotal(this.props.total)))))}}]),t}(n.Component),ee=Math.floor(50*Math.random()),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleOnSuccess=function(e,t){var n={public_token:e,metadata:t,accounts:a.props.accounts};a.props.addAccount(n)},a.onDeleteClick=function(e){var t={id:e,accounts:a.props.accounts};a.props.deleteAccount(t)},a.onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser()},a.state={gifs:[],isLoaded:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.accounts;this.props.getTransactions(e),this.fetchGifs()}},{key:"fetchGifs",value:function(){var e=this,t="http://api.giphy.com/v1/gifs/search?q=".concat("watch+your+money","&api_key=").concat("JXkpKRAmyWWfdABgWzYBU3qlPkzbVD2q","&limit=50");fetch(t).then(function(e){return e.json()}).then(function(t){console.log(t.data[ee].images.downsized.url),console.log(t.data.length),e.setState({isLoaded:!0,gifs:t.data[ee].images.downsized.url})})}}]),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.accounts,c=this.props.plaid,o=c.transactions,l=c.transactionsLoading,s=n.map(function(t){return r.a.createElement("li",{key:t._id,style:{marginTop:"1rem"}},r.a.createElement("button",{style:{marginRight:"1rem"},onClick:e.onDeleteClick.bind(e,t._id),className:"btn btn-small btn-floating waves-effect waves-light hoverable red accent-3"},r.a.createElement("i",{className:"material-icons"},"delete")),r.a.createElement("b",null,t.institutionName))});function i(e,t){var a=Math.pow(10,t||0);return Math.round(e*a)/a}var u=0;o.forEach(function(e){e.transactions.forEach(function(e){"Travel"===e.category[0]&&(u=i(u+e.amount,2))})}),console.log("This is Travel:",u);var m=0;o.forEach(function(e){e.transactions.forEach(function(e){"Food and Drink"===e.category[0]&&(m=i(m+e.amount,2))})}),console.log("This is Food and Drinks:",m);var d=0;o.forEach(function(e){e.transactions.forEach(function(e){"Payment"===e.category[0]&&(d=i(d+e.amount,2))})}),console.log("This is payment:",d);var p=0;o.forEach(function(e){e.transactions.forEach(function(e){"Shops"===e.category[0]&&(p=i(p+e.amount,2))})}),console.log("This is Shops:",p);var h=0;o.forEach(function(e){e.transactions.forEach(function(e){"Transfer"===e.category[0]&&(h=i(h+e.amount,2))})}),console.log("This is Transfer",h);var f=0;o.forEach(function(e){e.transactions.forEach(function(e){"Recreation"===e.category[0]&&(f=i(f+e.amount,2))})}),console.log("This is Recreation:",f);var E=[];return o.forEach(function(e){e.transactions.forEach(function(t){E.push({account:e.accountName,date:t.date,category:t.category[0],name:t.name,amount:t.amount})})}),r.a.createElement("div",{className:"container top-buffer"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("button",{onClick:this.onLogoutClick,className:"btn-flat waves-effect black"},r.a.createElement("i",{className:"material-icons left"},"\u2190")," Log Out"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"col s12 app-greet"},r.a.createElement("h4",null,r.a.createElement("b",null,"Welcome!")),r.a.createElement("p",{className:"black-text text-darken-1"},"Hey there, ",a.name.split(" ")[0]),r.a.createElement("h5",null,r.a.createElement("b",null,"Linked Accounts")),r.a.createElement("p",{className:"black-text text-darken-1"},"Add or remove your bank accounts below"),r.a.createElement("ul",null,s),r.a.createElement(q.a,{buttonProps:{className:"btn btn-large waves-effect waves-light hoverable blue accent-3 main-btn"},plaidLinkProps:{clientName:"MoneyTalks",key:"d91f183971b1a8d257dfcdcffe2cd3",env:"sandbox",product:["transactions"],onSuccess:this.handleOnSuccess},onScriptLoad:function(){return e.setState({loaded:!0})}},"Add Account"),r.a.createElement("hr",{style:{marginTop:"2rem",opacity:".2"}}),r.a.createElement("div",{className:"row"},r.a.createElement("img",{src:this.state.gifs,alt:"gif",style:{margin:"auto"}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement(Z,{total:f,category:"Recreation"}),r.a.createElement(Z,{total:u,category:"Travel"}),r.a.createElement(Z,{total:h,category:"Transfer"})),r.a.createElement("div",{className:"col-md-5"},r.a.createElement(Z,{total:d,category:"Payment"}),r.a.createElement(Z,{total:p,category:"Shops"}),r.a.createElement(Z,{total:m,category:"Food and Drink"}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h5",null,r.a.createElement("b",null,"Transactions")),l?r.a.createElement("p",{className:"grey-text text-darken-1"},"Fetching transactions..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"grey-text text-darken-1"},"You have ",r.a.createElement("b",null,E.length)," transactions from your",r.a.createElement("b",null," ",n.length)," linked",n.length>1?r.a.createElement("span",null," accounts "):r.a.createElement("span",null," account "),"from the past 30 days"),r.a.createElement(Q.a,{columns:[{title:"Account",field:"account"},{title:"Date",field:"date",type:"date",defaultSort:"desc"},{title:"Name",field:"name"},{title:"Amount",field:"amount"},{title:"Category",field:"category"}],data:E,title:"Search Transactions"}))))))}}]),t}(n.Component),ae=Object(N.b)(function(e){return{plaid:e.plaid}},{logoutUser:y,getTransactions:$,addAccount:J,deleteAccount:function(e){return function(t){if(window.confirm("Are you sure you want to remove this account?")){var a=e.id,n=e.accounts.filter(function(e){return e._id!==a});b.a.delete("/api/plaid/accounts/".concat(a)).then(function(e){return t({type:"DELETE_ACCOUNT",payload:a})}).then(n?t($(n)):null).catch(function(e){return console.log(e)})}}}})(te),ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser()},a.handleOnSuccess=function(e,t){var n={public_token:e,metadata:t};a.props.addAccount(n)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getAccounts()}},{key:"render",value:function(){var e,t=this,a=this.props.auth.user,n=this.props.plaid,c=n.accounts,o=n.accountsLoading;return e=null===c||o?r.a.createElement("p",{className:"center-align"},"Loading..."):c.length>0?r.a.createElement(ae,{user:a,accounts:c}):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("h4",null,r.a.createElement("b",null,"Welcome,")," ",a.name.split(" ")[0]),r.a.createElement("p",{className:"flow-text grey-text text-darken-1",style:{background:"white",opacity:.75,width:600,margin:"auto"}},"To get started, link your first bank account below"),r.a.createElement("div",null,r.a.createElement(q.a,{buttonProps:{className:"btn btn-large waves-effect waves-light hoverable blue accent-3 main-btn"},plaidLinkProps:{clientName:"MoneyTalks",key:"d91f183971b1a8d257dfcdcffe2cd3",env:"sandbox",product:["transactions"],onSuccess:this.handleOnSuccess},onScriptLoad:function(){return t.setState({loaded:!0})}},"Link Account")),r.a.createElement("button",{onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable red accent-3 main-btn"},"Logout"))),r.a.createElement("div",{className:"container"},e)}}]),t}(n.Component),re=Object(N.b)(function(e){return{auth:e.auth,plaid:e.plaid}},{logoutUser:y,getAccounts:function(){return function(e){e(Y()),b.a.get("/api/plaid/accounts").then(function(t){return e({type:"GET_ACCOUNTS",payload:t.data})}).catch(function(t){return e({type:"GET_ACCOUNTS",payload:null})})}},addAccount:J})(ne);n.Component,a(601);if(localStorage.jwtToken){var ce=localStorage.jwtToken;g(ce);var oe=f()(ce);_.dispatch(v(oe));var le=Date.now()/1e3;oe.exp<le&&(_.dispatch(y()),window.location.href="./login")}var se=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{store:_},r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(U,null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.b,{exact:!0,path:"/",component:I}),r.a.createElement(p.b,{exact:!0,path:"/register",component:B}),r.a.createElement(p.b,{exact:!0,path:"/login",component:z}),r.a.createElement("div",{className:"container"}),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/dashboard",component:re})))))}}]),t}(n.Component);o.a.render(r.a.createElement(se,null),document.getElementById("root"))}},[[292,1,2]]]);
//# sourceMappingURL=main.8606e4cd.chunk.js.map